<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.zetech.thingapp.thingapp.dal.interfaces.UserDAOInterface">

  <select id="retrieveAll" resultType="com.zetech.thingapp.thingapp.model.UserVO">
	    SELECT * 
	      FROM user
	  ORDER BY email ASC
  </select>
  
  <select id="retrieveByEmail" resultType="com.zetech.thingapp.thingapp.model.UserVO">
	    SELECT * 
	      FROM user
	     WHERE email=#{id}
  </select>
  
  <select id="retrieveByGoogleId" resultType="com.zetech.thingapp.thingapp.model.UserVO">
	    SELECT * 
	      FROM account
	     WHERE google_id=#{id}
  </select>
  
  <insert id="create" parameterType="com.zetech.thingapp.thingapp.model.UserVO" keyColumn="email" keyProperty="email">
    INSERT INTO account(ain,
    					name,
    					username,
    					password_md5,
    					password_date,
    					created_dtg
    					)
    			 values(#{ain},
    			        #{name},
    			        #{username},
    			        #{passwordMd5},
    			        #{passwordDate},
    			        #{createdDtg}
    					)	
  </insert>

  <update id="updateLastLogin" parameterType="wfh.catalyst.thing.model.AccountVO">
    UPDATE account
       SET last_login_dtg=#{lastLoginDtg}
     WHERE ain=#{ain}
  </update>
</mapper>